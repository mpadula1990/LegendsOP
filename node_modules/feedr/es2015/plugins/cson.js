'use strict';

module.exports.parse = function parseCSON(_ref, next) {
	var feed = _ref.feed,
	    response = _ref.response,
	    data = _ref.data;

	// Detect
	var isCSON = feed.parse === 'cson' || ['.coffee', '.cson'].indexOf(feed.extension) !== -1 || response.headers['content-type'].indexOf('coffeescript') !== -1 || response.headers['content-type'].indexOf('cson') !== -1;
	if (!isCSON) {
		next();
		return;
	}

	// Parse
	require('CSON').parseCSONString(data.toString(), next);
};